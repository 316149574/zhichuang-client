import{c as e}from"./index.5dbf8fd3.js";import"./vendor.c3957063.js";const a={computed:{uploadUrl:function(){return e.baseApi+"/api/upload"}},data(){return{iNow:0,caseInfo:{name:"",des:"",thumbnail:"",isbanner:!1,bannerurl:"",caseimgurl:[],category:""},headers:{Authorization:this.$storage.getItem("token")},rules:{name:[{required:!0,message:"项目项目名称为必填",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],des:[{required:!0,message:"项目描述为必填",trigger:"blur"},{min:10,max:300,message:"长度在 10 到300个字符",trigger:"blur"}]}}},methods:{isOk(){var e=this.caseInfo.isbanner?2:1;this.iNow===this.$refs.caseUpload.uploadRef.fileList.length+e&&(this.submitData(),this.iNow=0)},handleBannerSuccess(e,a){this.caseInfo.bannerurl=e.data.path,this.iNow++,this.isOk()},handleThumbSuccess(e,a){this.caseInfo.thumbnail=e.data.path,this.iNow++,this.isOk()},handleCaseSuccess(e,a,s){this.caseInfo.caseimgurl.push(e.data.path),this.iNow++,this.isOk()},thumbExceed(){this.$ElMessage.error("缩略图只能上传一张")},bannerExceed(){this.$ElMessage.error("轮播图只能上传一张")},caseExceed(){this.$ElMessage.error("案例图片最多上传5张")},submitData(){const{name:e,des:a,thumbnail:s,bannerurl:t,isbanner:l,caseimgurl:o,category:i}=this.caseInfo;this.$api.addCase({name:e,des:a,thumbnail:s,bannerurl:t,isbanner:l,caseimgurl:o,category:i}).then((e=>{this.$ElMessage.success(e.mes),this.reset()}))},submitForm(e){const a=this;this.$refs[e].validate((e=>{e&&(a.caseInfo.category?a.$refs.thumbUpload.uploadRef.fileList.length>0&&a.$refs.caseUpload.uploadRef.fileList.length>0?(this.$refs.bannerUpload.uploadRef.fileList.length>0&&this.$refs.bannerUpload.submit(),this.$refs.thumbUpload.submit(),this.$refs.caseUpload.submit()):this.$ElMessage.error("必须上传缩略图和案例图片"):this.$ElMessage.error("请选择案例分类"))}))},reset(){this.$refs.caseUpload.clearFiles(),this.$refs.bannerUpload.clearFiles(),this.$refs.thumbUpload.clearFiles(),this.caseInfo.thumbnail="",this.caseInfo.caseimgurl=[],this.caseInfo.bannerurl="",this.caseInfo.isbanner=!1,this.caseInfo.category="",this.caseInfo.name="",this.caseInfo.des=""}}},s={class:"addcase"},t=Vue.createVNode("i",{class:"icon iconfont icon-shangchuan"},null,-1),l=Vue.createVNode("div",{class:"el-upload__tip"},"公司合作logo：200*100px",-1),o=Vue.createVNode("i",{class:"icon iconfont icon-shangchuan"},null,-1),i=Vue.createVNode("div",{class:"el-upload__tip"},"缩略图尺寸：460*345px",-1),u=Vue.createVNode("i",{class:"icon iconfont icon-shangchuan"},null,-1),n=Vue.createVNode("div",{class:"el-upload__tip"}," 项目案例图片：建议 750*800px,最多上传10张 ",-1),r=Vue.createTextVNode("添加案例"),c=Vue.createTextVNode(" 重置 ");a.render=function(e,a,d,h,V,m){const p=Vue.resolveComponent("el-input"),f=Vue.resolveComponent("el-form-item"),b=Vue.resolveComponent("el-option"),g=Vue.resolveComponent("el-select"),x=Vue.resolveComponent("el-switch"),N=Vue.resolveComponent("el-upload"),w=Vue.resolveComponent("el-button"),C=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock("div",s,[Vue.createVNode(C,{model:V.caseInfo,rules:V.rules,ref:"caseForm","label-width":"150px",class:"caseinfo"},{default:Vue.withCtx((()=>[Vue.createVNode(f,{label:"项目名称",prop:"name"},{default:Vue.withCtx((()=>[Vue.createVNode(p,{modelValue:V.caseInfo.name,"onUpdate:modelValue":a[1]||(a[1]=e=>V.caseInfo.name=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(f,{label:"项目描述",prop:"des"},{default:Vue.withCtx((()=>[Vue.createVNode(p,{type:"textarea",modelValue:V.caseInfo.des,"onUpdate:modelValue":a[2]||(a[2]=e=>V.caseInfo.des=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(f,{label:"项目分类"},{default:Vue.withCtx((()=>[Vue.createVNode(g,{modelValue:V.caseInfo.category,"onUpdate:modelValue":a[3]||(a[3]=e=>V.caseInfo.category=e),placeholder:"选择项目类别"},{default:Vue.withCtx((()=>[Vue.createVNode(b,{label:"UI设计",value:"ui"}),Vue.createVNode(b,{label:"网站开发",value:"web"}),Vue.createVNode(b,{label:"视频制作",value:"movie"}),Vue.createVNode(b,{label:"广告设计",value:"ad"})])),_:1},8,["modelValue"])])),_:1}),Vue.createVNode(f,{label:"合作客户logo"},{default:Vue.withCtx((()=>[Vue.createVNode(x,{modelValue:V.caseInfo.isbanner,"onUpdate:modelValue":a[4]||(a[4]=e=>V.caseInfo.isbanner=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(f,null,{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createVNode(N,{ref:"bannerUpload",class:"banner-pic",action:m.uploadUrl,name:"file",limit:1,"auto-upload":!1,"on-exceed":m.bannerExceed,"on-success":m.handleBannerSuccess,"list-type":"picture-card",headers:V.headers,"show-file-list":!0},{tip:Vue.withCtx((()=>[l])),default:Vue.withCtx((()=>[t])),_:1},8,["action","on-exceed","on-success","headers"]),[[Vue.vShow,V.caseInfo.isbanner]])])),_:1}),Vue.createVNode(f,{label:"项目缩略图"},{default:Vue.withCtx((()=>[Vue.createVNode(N,{ref:"thumbUpload",class:"thumb-pic",action:m.uploadUrl,"auto-upload":!1,name:"file",limit:1,"on-exceed":m.thumbExceed,"on-success":m.handleThumbSuccess,"list-type":"picture-card",headers:V.headers,"show-file-list":!0},{tip:Vue.withCtx((()=>[i])),default:Vue.withCtx((()=>[o])),_:1},8,["action","on-exceed","on-success","headers"])])),_:1}),Vue.createVNode(f,{label:"项目案例图片"},{default:Vue.withCtx((()=>[Vue.createVNode(N,{ref:"caseUpload",class:"case-pic",action:m.uploadUrl,name:"file",limit:10,"auto-upload":!1,"on-exceed":m.caseExceed,"on-success":m.handleCaseSuccess,"list-type":"picture-card",headers:V.headers,"show-file-list":!0},{tip:Vue.withCtx((()=>[n])),default:Vue.withCtx((()=>[u])),_:1},8,["action","on-exceed","on-success","headers"])])),_:1}),Vue.createVNode(f,null,{default:Vue.withCtx((()=>[Vue.createVNode(w,{type:"primary",onClick:a[5]||(a[5]=e=>m.submitForm("caseForm"))},{default:Vue.withCtx((()=>[r])),_:1}),Vue.createVNode(w,{type:"danger",onClick:m.reset},{default:Vue.withCtx((()=>[c])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])};export{a as default};
