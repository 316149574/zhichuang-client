import{c as e}from"./index.5dbf8fd3.js";import"./vendor.c3957063.js";const l={computed:{uploadUrl:function(){return e.baseApi+"/api/upload"}},data(){return{BannerInfo:{bannerurl:"",title:"",des:"",bgcolor:"",link:""},headers:{Authorization:this.$storage.getItem("token")},rules:{title:[{required:!0,message:"标题为必填项",trigger:"blur"},{min:3,max:25,message:"长度在 3 到25个字符",trigger:"blur"}],link:[{required:!0,message:"轮播链接为必填项",trigger:"blur"}],des:[{required:!0,message:"轮播描述为必填项",trigger:"blur"},{min:20,max:60,message:"长度在20 到60个字符",trigger:"blur"}],bgcolor:[{required:!0,message:"背景颜色为必填项",trigger:"blur"},{min:2,max:100,message:"长度在2 到50个字符",trigger:"blur"}]}}},methods:{submit(e){const l=this;this.$refs[e].validate((e=>{e&&(l.$refs.bannerUpload.uploadRef.fileList.length?l.$refs.bannerUpload.submit():l.$ElMessage.error("请上传轮播图片"))}))},handleBannerSuccess(e){let l=this,{path:a}=e.data;this.BannerInfo.bannerurl=a;let r=this.BannerInfo;this.$api.addBanner(r).then((e=>{40001==e.code?l.$refs.bannerUpload.clearFiles():(l.$ElMessage.success(e.mes),l.reset())}))},reset(){this.$refs.bannerUpload.clearFiles(),this.BannerInfo.title="",this.BannerInfo.link=""}}},a=Vue.withScopeId("data-v-470d0bed");Vue.pushScopeId("data-v-470d0bed");const r={class:"addBanner"},o=Vue.createVNode("i",{class:"icon iconfont icon-shangchuan"},null,-1),n=Vue.createVNode("div",{class:"el-upload__tip"},"建议尺寸: 400*400px, 建议格式： png",-1),t=Vue.createTextVNode("提交");Vue.popScopeId();const d=a(((e,l,d,s,u,i)=>{const c=Vue.resolveComponent("el-upload"),p=Vue.resolveComponent("el-form-item"),V=Vue.resolveComponent("el-input"),m=Vue.resolveComponent("el-button"),f=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock("div",r,[Vue.createVNode(f,{rules:u.rules,ref:"bannerForm","label-position":"left","label-width":"100px",model:u.BannerInfo},{default:a((()=>[Vue.createVNode(p,{label:"上传轮播图"},{default:a((()=>[Vue.createVNode(c,{ref:"bannerUpload",class:"banner-uploader","list-type":"picture-card",limit:1,"auto-upload":!1,action:i.uploadUrl,headers:u.headers,"show-file-list":!0,"on-success":i.handleBannerSuccess},{tip:a((()=>[n])),default:a((()=>[o])),_:1},8,["action","headers","on-success"])])),_:1}),Vue.createVNode(p,{label:"标题",prop:"title"},{default:a((()=>[Vue.createVNode(V,{modelValue:u.BannerInfo.title,"onUpdate:modelValue":l[1]||(l[1]=e=>u.BannerInfo.title=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(p,{label:"轮播描述",prop:"des"},{default:a((()=>[Vue.createVNode(V,{placeholder:"轮播图描述文字，建议字数在20~60之间",type:"textarea",row:10,modelValue:u.BannerInfo.des,"onUpdate:modelValue":l[2]||(l[2]=e=>u.BannerInfo.des=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(p,{label:"背景颜色",prop:"bgcolor"},{default:a((()=>[Vue.createVNode(V,{placeholder:"支持格式：#fff 、rbg、关键字(red、yellow), 如果设置渐变颜色请用 | 分割 如： red|yellow ",modelValue:u.BannerInfo.bgcolor,"onUpdate:modelValue":l[3]||(l[3]=e=>u.BannerInfo.bgcolor=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(p,{label:"轮播链接",prop:"link"},{default:a((()=>[Vue.createVNode(V,{modelValue:u.BannerInfo.link,"onUpdate:modelValue":l[4]||(l[4]=e=>u.BannerInfo.link=e)},null,8,["modelValue"])])),_:1}),Vue.createVNode(p,null,{default:a((()=>[Vue.createVNode(m,{type:"primary",onClick:l[5]||(l[5]=e=>i.submit("bannerForm"))},{default:a((()=>[t])),_:1})])),_:1})])),_:1},8,["rules","model"])])}));l.render=d,l.__scopeId="data-v-470d0bed";export{l as default};
